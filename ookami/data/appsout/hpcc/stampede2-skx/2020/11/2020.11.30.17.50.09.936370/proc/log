To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
Last login: Mon Nov 30 16:47:29 2020 from 199.109.193.251
------------------------------------------------------------------------------
                   Welcome to the Stampede2 Supercomputer
      Texas Advanced Computing Center, The University of Texas at Austin
------------------------------------------------------------------------------

              ** Unauthorized use/access is prohibited. **

If you log on to this computer system, you acknowledge your awareness
of and concurrence with the UT Austin Acceptable Use Policy. The
University will prosecute violators to the full extent of the law.

TACC Usage Policies:
http://www.tacc.utexas.edu/user-services/usage-policies/
______________________________________________________________________________

Welcome to Stampede2, *please* read these important system notes:

--> Stampede2 user documentation is available at:
       https://portal.tacc.utexas.edu/user-guides/stampede2

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
----------------------- Project balances for user xdtas -----------------------
| Name           Avail SUs     Expires |                                      |
| TG-CCR120014        2877  2021-09-30 |                                      |
------------------------- Disk quotas for user xdtas --------------------------
| Disk         Usage (GB)     Limit    %Used   File Usage       Limit   %Used |
| /home1              0.0      10.0     0.11         1232      200000    0.62 |
| /work             166.2    1024.0    16.23       224624     3000000    7.49 |
| /scratch            2.3       0.0     0.00       323903           0    0.00 |
-------------------------------------------------------------------------------

Tip 174   (See "module help tacc_tips" for features or how to disable)

   You can have ls list all files except . and ..
      $ ls -A

login4.stampede2(1001)$  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> export PS1='PROMPTtTtT ';\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  
PROMPTtTtT  
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo TeStTeStTeStThEproMPT;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
TeStTeStTeStThEproMPT
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo test > /scratch/01482/xdtas/akrrdata/stampede2-skx/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat /scratch/01482/xdtas/akrrdata/stampede2-skx/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
test
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> rm /scratch/01482/xdtas/akrrdata/stampede2-skx/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo test > /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_writ<2/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_write                         ;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
test
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> rm /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.<dtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.0                         9.936370" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
DOES_NOT_EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> mkdir -p "/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50<xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.                         09.936370";\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.<dtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.0                         9.936370" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo test > /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.<2/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.5                         0.09.936370/akrr_test_wri<-skx/hpcc/2020.11.30.17.50.09.936370/akrr_test_writ                         e;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.93<akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936                         370/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
test
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> rm /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936<krrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.9363                         70/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cd /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936<krrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.9363                         70;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

hpcc.job                                        0%    0     0.0KB/s   --:-- ETAhpcc.job                                      100% 2550    59.7KB/s   00:00    
 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat hpcc.job ;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
#!/bin/bash
#SBATCH --partition=skx-normal
#SBATCH --qos=normal
#SBATCH --nodes=8
#SBATCH --ntasks-per-node=48
#SBATCH --time=00:04:00
#SBATCH --output=/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936370/stdout
#SBATCH --error=/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936370/stderr
#SBATCH --exclusive


#Common commands
export AKRR_NODES=8
export AKRR_CORES=384
export AKRR_CORES_PER_NODE=48
export AKRR_NETWORK_SCRATCH="/scratch/01482/xdtas"
export AKRR_LOCAL_SCRATCH="/tmp"
export AKRR_TASK_WORKDIR="/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936370"
export AKRR_APPKER_DIR="/work/01482/xdtas/appker/stampede2-skx"
export AKRR_AKRR_DIR="/scratch/01482/xdtas/akrrdata/stampede2-skx"

export AKRR_APPKER_NAME="hpcc"
export AKRR_RESOURCE_NAME="stampede2-skx"
export AKRR_TIMESTAMP="2020.11.30.17.50.09.936370"
export AKRR_APP_STDOUT_FILE="$AKRR_TASK_WORKDIR/appstdout"

export AKRR_APPKERNEL_INPUT="/work/01482/xdtas/appker/stampede2-skx/inputs/hpcc/hpccinf.txt.48x8"
export AKRR_APPKERNEL_EXECUTABLE="/work/01482/xdtas/appker/stampede2-skx/execs/hpcc/hpcc"

source "$AKRR_APPKER_DIR/execs/bin/akrr_util.bash"

#Populate list of nodes per MPI process
export AKRR_NODELIST=`srun -l --ntasks-per-node=$AKRR_CORES_PER_NODE -n $AKRR_CORES hostname -s|sort -n| awk '{printf "%s ",$2}' `

export PATH="$AKRR_APPKER_DIR/execs/bin:$PATH"

cd "$AKRR_TASK_WORKDIR"

#run common tests
akrr_perform_common_tests

#Write some info to gen.info, JSON-Like file
akrr_write_to_gen_info "start_time" "`date`"
akrr_write_to_gen_info "node_list" "$AKRR_NODELIST"


#create working dir
mkdir workdir
cd workdir

#Copy inputs
cp /work/01482/xdtas/appker/stampede2-skx/inputs/hpcc/hpccinf.txt.48x8 ./hpccinf.txt

EXE=/work/01482/xdtas/appker/stampede2-skx/execs/hpcc/hpcc

ulimit -s unlimited



#Load application enviroment
module list

#set how to run app kernel
RUN_APPKERNEL="ibrun /work/01482/xdtas/appker/stampede2-skx/execs/hpcc/hpcc"


# Generate AppKer signature
appsigcheck.sh $EXE $AKRR_TASK_WORKDIR/.. >> $AKRR_APP_STDOUT_FILE


#Execute AppKer
akrr_write_to_gen_info "appkernel_start_time" "`date`"
$RUN_APPKERNEL >> $AKRR_APP_STDOUT_FILE 2>&1
akrr_write_to_gen_info "appkernel_end_time" "`date`"




cat hpccoutf.txt  >> $AKRR_APP_STDOUT_FILE 2>&1

cd ..

akrr_write_to_gen_info "cpu_speed" "`grep 'cpu MHz' /proc/cpuinfo`"

#clean-up
if [ "${AKRR_DEBUG=no}" = "no" ]
then
        echo "Deleting input files"
        rm -rf workdir
fi



akrr_write_to_gen_info "end_time" "`date`"
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> sbatch hpcc.job;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully

-----------------------------------------------------------------
          Welcome to the Stampede2 Supercomputer                 
-----------------------------------------------------------------

No reservation for this job
--> Verifying valid submit host (login4)...OK
--> Verifying valid jobname...OK
--> Enforcing max jobs per user...OK
--> Verifying availability of your home dir (/home1/01482/xdtas)...OK
--> Verifying availability of your work dir (/work/01482/xdtas/stampede2)...OK
--> Verifying availability of your scratch dir (/scratch/01482/xdtas)...OK
--> Verifying valid ssh keys...OK
--> Verifying access to desired queue (skx-normal)...OK
--> Verifying job request is within current queue limits...FAILED

    [*] Too many simultaneous jobs in queue.
        --> Max job limits for skx-normal =  25 jobs

ExeCUTEd_SucCeSsFully
PROMPTtTtT To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
Last login: Mon Nov 30 17:49:03 2020 from 199.109.193.251
------------------------------------------------------------------------------
                   Welcome to the Stampede2 Supercomputer
      Texas Advanced Computing Center, The University of Texas at Austin
------------------------------------------------------------------------------

              ** Unauthorized use/access is prohibited. **

If you log on to this computer system, you acknowledge your awareness
of and concurrence with the UT Austin Acceptable Use Policy. The
University will prosecute violators to the full extent of the law.

TACC Usage Policies:
http://www.tacc.utexas.edu/user-services/usage-policies/
______________________________________________________________________________

Welcome to Stampede2, *please* read these important system notes:

--> Stampede2 user documentation is available at:
       https://portal.tacc.utexas.edu/user-guides/stampede2

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
----------------------- Project balances for user xdtas -----------------------
| Name           Avail SUs     Expires |                                      |
| TG-CCR120014        2877  2021-09-30 |                                      |
------------------------- Disk quotas for user xdtas --------------------------
| Disk         Usage (GB)     Limit    %Used   File Usage       Limit   %Used |
| /home1              0.0      10.0     0.11         1240      200000    0.62 |
| /work             166.2    1024.0    16.23       224628     3000000    7.49 |
| /scratch            2.3       0.0     0.00       323915           0    0.00 |
-------------------------------------------------------------------------------

Tip 141   (See "module help tacc_tips" for features or how to disable)

   You easily find the longest line in a file by executing:
       $ wc -L <file>

login4.stampede2(1001)$  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> export PS1='PROMPTtTtT ';\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  
PROMPTtTtT  
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo TeStTeStTeStThEproMPT;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
TeStTeStTeStThEproMPT
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo test > /scratch/01482/xdtas/akrrdata/stampede2-skx/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat /scratch/01482/xdtas/akrrdata/stampede2-skx/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
test
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> rm /scratch/01482/xdtas/akrrdata/stampede2-skx/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo test > /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_writ<2/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_write                         ;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
test
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> rm /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> if [ -d "/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.<dtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.0                         9.936370" ]
>  then 
>  echo EXIST
>  else echo DOES_NOT_EXIST
>  fi;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
EXIST
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo test > /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.<2/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.5                         0.09.936370/akrr_test_wri<-skx/hpcc/2020.11.30.17.50.09.936370/akrr_test_writ                         e;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.93<akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936                         370/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
test
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> rm /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936<krrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.9363                         70/akrr_test_write;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cd /scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936<krrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.9363                         70;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

hpcc.job                                        0%    0     0.0KB/s   --:-- ETAhpcc.job                                      100% 2550    46.1KB/s   00:00    
 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> cat hpcc.job ;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
#!/bin/bash
#SBATCH --partition=skx-normal
#SBATCH --qos=normal
#SBATCH --nodes=8
#SBATCH --ntasks-per-node=48
#SBATCH --time=00:04:00
#SBATCH --output=/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936370/stdout
#SBATCH --error=/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936370/stderr
#SBATCH --exclusive


#Common commands
export AKRR_NODES=8
export AKRR_CORES=384
export AKRR_CORES_PER_NODE=48
export AKRR_NETWORK_SCRATCH="/scratch/01482/xdtas"
export AKRR_LOCAL_SCRATCH="/tmp"
export AKRR_TASK_WORKDIR="/scratch/01482/xdtas/akrrdata/stampede2-skx/hpcc/2020.11.30.17.50.09.936370"
export AKRR_APPKER_DIR="/work/01482/xdtas/appker/stampede2-skx"
export AKRR_AKRR_DIR="/scratch/01482/xdtas/akrrdata/stampede2-skx"

export AKRR_APPKER_NAME="hpcc"
export AKRR_RESOURCE_NAME="stampede2-skx"
export AKRR_TIMESTAMP="2020.11.30.17.50.09.936370"
export AKRR_APP_STDOUT_FILE="$AKRR_TASK_WORKDIR/appstdout"

export AKRR_APPKERNEL_INPUT="/work/01482/xdtas/appker/stampede2-skx/inputs/hpcc/hpccinf.txt.48x8"
export AKRR_APPKERNEL_EXECUTABLE="/work/01482/xdtas/appker/stampede2-skx/execs/hpcc/hpcc"

source "$AKRR_APPKER_DIR/execs/bin/akrr_util.bash"

#Populate list of nodes per MPI process
export AKRR_NODELIST=`srun -l --ntasks-per-node=$AKRR_CORES_PER_NODE -n $AKRR_CORES hostname -s|sort -n| awk '{printf "%s ",$2}' `

export PATH="$AKRR_APPKER_DIR/execs/bin:$PATH"

cd "$AKRR_TASK_WORKDIR"

#run common tests
akrr_perform_common_tests

#Write some info to gen.info, JSON-Like file
akrr_write_to_gen_info "start_time" "`date`"
akrr_write_to_gen_info "node_list" "$AKRR_NODELIST"


#create working dir
mkdir workdir
cd workdir

#Copy inputs
cp /work/01482/xdtas/appker/stampede2-skx/inputs/hpcc/hpccinf.txt.48x8 ./hpccinf.txt

EXE=/work/01482/xdtas/appker/stampede2-skx/execs/hpcc/hpcc

ulimit -s unlimited



#Load application enviroment
module list

#set how to run app kernel
RUN_APPKERNEL="ibrun /work/01482/xdtas/appker/stampede2-skx/execs/hpcc/hpcc"


# Generate AppKer signature
appsigcheck.sh $EXE $AKRR_TASK_WORKDIR/.. >> $AKRR_APP_STDOUT_FILE


#Execute AppKer
akrr_write_to_gen_info "appkernel_start_time" "`date`"
$RUN_APPKERNEL >> $AKRR_APP_STDOUT_FILE 2>&1
akrr_write_to_gen_info "appkernel_end_time" "`date`"




cat hpccoutf.txt  >> $AKRR_APP_STDOUT_FILE 2>&1

cd ..

akrr_write_to_gen_info "cpu_speed" "`grep 'cpu MHz' /proc/cpuinfo`"

#clean-up
if [ "${AKRR_DEBUG=no}" = "no" ]
then
        echo "Deleting input files"
        rm -rf workdir
fi



akrr_write_to_gen_info "end_time" "`date`"
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> sbatch hpcc.job;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully

-----------------------------------------------------------------
          Welcome to the Stampede2 Supercomputer                 
-----------------------------------------------------------------

No reservation for this job
--> Verifying valid submit host (login4)...OK
--> Verifying valid jobname...OK
--> Enforcing max jobs per user...OK
--> Verifying availability of your home dir (/home1/01482/xdtas)...OK
--> Verifying availability of your work dir (/work/01482/xdtas/stampede2)...OK
--> Verifying availability of your scratch dir (/scratch/01482/xdtas)...OK
--> Verifying valid ssh keys...OK
--> Verifying access to desired queue (skx-normal)...OK
--> Verifying job request is within current queue limits...OK
--> Checking available allocation (TG-CCR120014)...OK
Submitted batch job 6922904
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo 6922904 > job.id;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT 
RemoteJobID= 6922904
copying files from remote machine
To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

hpcc.job                                        0%    0     0.0KB/s   --:-- ETAhpcc.job                                      100% 2550    58.1KB/s   00:00    
job.id                                          0%    0     0.0KB/s   --:-- ETAjob.id                                        100%    8     0.2KB/s   00:00    
### Checking the job status on remote machine
To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
Last login: Mon Nov 30 17:50:17 2020 from 199.109.193.251
------------------------------------------------------------------------------
                   Welcome to the Stampede2 Supercomputer
      Texas Advanced Computing Center, The University of Texas at Austin
------------------------------------------------------------------------------

              ** Unauthorized use/access is prohibited. **

If you log on to this computer system, you acknowledge your awareness
of and concurrence with the UT Austin Acceptable Use Policy. The
University will prosecute violators to the full extent of the law.

TACC Usage Policies:
http://www.tacc.utexas.edu/user-services/usage-policies/
______________________________________________________________________________

Welcome to Stampede2, *please* read these important system notes:

--> Stampede2 user documentation is available at:
       https://portal.tacc.utexas.edu/user-guides/stampede2

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
----------------------- Project balances for user xdtas -----------------------
| Name           Avail SUs     Expires |                                      |
| TG-CCR120014        2877  2021-09-30 |                                      |
------------------------- Disk quotas for user xdtas --------------------------
| Disk         Usage (GB)     Limit    %Used   File Usage       Limit   %Used |
| /home1              0.0      10.0     0.11         1241      200000    0.62 |
| /work             166.2    1024.0    16.23       224628     3000000    7.49 |
| /scratch            2.3       0.0     0.00       323923           0    0.00 |
-------------------------------------------------------------------------------

Tip 134   (See "module help tacc_tips" for features or how to disable)

   All users can use the following to find the location of a command:
      $ whereis ls

login3.stampede2(1001)$  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> export PS1='PROMPTtTtT ';\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  
PROMPTtTtT  
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo TeStTeStTeStThEproMPT;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
TeStTeStTeStThEproMPT
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> squeue -u $USER 2>&1;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
             JOBID   PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
           6919252  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6919283  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6919282  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920460  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6920459  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6920457  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920458  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920455  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6920456  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6921291  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6921290  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6921289  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6921286  skx-normal hpcg.job    xdtas PD       0:00      8 (Priority)
           6921285  skx-normal hpcg.job    xdtas PD       0:00      4 (Priority)
           6922082  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922087  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922362  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922536  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922695  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922839  skx-normal hpcc.job    xdtas PD       0:00      8 (Priority)
           6922893  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922904  skx-normal hpcc.job    xdtas PD       0:00      8 (Priority)
           6922898  skx-normal hpcc.job    xdtas PD       0:00      4 (Priority)
           6920454  skx-normal hpcg.job    xdtas  R       3:20      8 c499-023,c502-[002,062-063,071,092],c503-[004,013]
           6922899  skx-normal hpcc.job    xdtas  R       1:01      2 c476-042,c496-062
ExeCUTEd_SucCeSsFully
PROMPTtTtT ### Checking the job status on remote machine
To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
Last login: Mon Nov 30 18:21:44 2020 from 199.109.193.251
------------------------------------------------------------------------------
                   Welcome to the Stampede2 Supercomputer
      Texas Advanced Computing Center, The University of Texas at Austin
------------------------------------------------------------------------------

              ** Unauthorized use/access is prohibited. **

If you log on to this computer system, you acknowledge your awareness
of and concurrence with the UT Austin Acceptable Use Policy. The
University will prosecute violators to the full extent of the law.

TACC Usage Policies:
http://www.tacc.utexas.edu/user-services/usage-policies/
______________________________________________________________________________

Welcome to Stampede2, *please* read these important system notes:

--> Stampede2 user documentation is available at:
       https://portal.tacc.utexas.edu/user-guides/stampede2

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
----------------------- Project balances for user xdtas -----------------------
| Name           Avail SUs     Expires |                                      |
| TG-CCR120014        2877  2021-09-30 |                                      |
------------------------- Disk quotas for user xdtas --------------------------
| Disk         Usage (GB)     Limit    %Used   File Usage       Limit   %Used |
| /home1              0.0      10.0     0.11         1244      200000    0.62 |
| /work             166.2    1024.0    16.23       224638     3000000    7.49 |
| /scratch            2.3       0.0     0.00       323924           0    0.00 |
-------------------------------------------------------------------------------

Tip 82   (See "module help tacc_tips" for features or how to disable)

   If you want to know more about a bash command ? try to use the "--help"
   command. For example with mkdir:
     $ mkdir --help

login3.stampede2(1001)$  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> export PS1='PROMPTtTtT ';\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  
PROMPTtTtT  
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo TeStTeStTeStThEproMPT;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
TeStTeStTeStThEproMPT
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> squeue -u $USER 2>&1;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
             JOBID   PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
           6919252  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6919283  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6919282  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920459  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6920460  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6920457  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920458  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920455  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6920456  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6921291  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6921290  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6921289  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6922082  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922087  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922362  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922536  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922695  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922893  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922904  skx-normal hpcc.job    xdtas PD       0:00      8 (Priority)
           6922913  skx-normal hpcc.job    xdtas PD       0:00      8 (Priority)
           6922959  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922970  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922980  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922991  skx-normal hpcg.job    xdtas PD       0:00      1 (Priority)
           6922992  skx-normal hpcc.job    xdtas PD       0:00      1 (Priority)
ExeCUTEd_SucCeSsFully
PROMPTtTtT ### Checking the job status on remote machine
To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
Last login: Mon Nov 30 18:48:16 2020 from 199.109.193.251
------------------------------------------------------------------------------
                   Welcome to the Stampede2 Supercomputer
      Texas Advanced Computing Center, The University of Texas at Austin
------------------------------------------------------------------------------

              ** Unauthorized use/access is prohibited. **

If you log on to this computer system, you acknowledge your awareness
of and concurrence with the UT Austin Acceptable Use Policy. The
University will prosecute violators to the full extent of the law.

TACC Usage Policies:
http://www.tacc.utexas.edu/user-services/usage-policies/
______________________________________________________________________________

Welcome to Stampede2, *please* read these important system notes:

--> Stampede2 user documentation is available at:
       https://portal.tacc.utexas.edu/user-guides/stampede2

 echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
export PS1='PROMPTtTtT ';\
echo ExeCUTEd_SucCeSsFully
 
 
----------------------- Project balances for user xdtas -----------------------
| Name           Avail SUs     Expires |                                      |
| TG-CCR120014        2877  2021-09-30 |                                      |
------------------------- Disk quotas for user xdtas --------------------------
| Disk         Usage (GB)     Limit    %Used   File Usage       Limit   %Used |
| /home1              0.0      10.0     0.11         1249      200000    0.62 |
| /work             166.2    1024.0    16.23       224638     3000000    7.49 |
| /scratch            2.3       0.0     0.00       323928           0    0.00 |
-------------------------------------------------------------------------------

Tip 17   (See "module help tacc_tips" for features or how to disable)

   To build software in your own user space, ./configure
   --prefix=$WORK/myapps is often the trick you're looking for.

login2.stampede2(1001)$  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> export PS1='PROMPTtTtT ';\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
PROMPTtTtT  
PROMPTtTtT  
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> echo TeStTeStTeStThEproMPT;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
TeStTeStTeStThEproMPT
ExeCUTEd_SucCeSsFully
PROMPTtTtT  echo StArTEd_ExeCUTEtIoM_SucCeSsFully;\
> squeue -u $USER 2>&1;\
> echo ExeCUTEd_SucCeSsFully
StArTEd_ExeCUTEtIoM_SucCeSsFully
             JOBID   PARTITION     NAME     USER ST       TIME  NODES NODELIST(REASON)
           6919252  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6919283  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6919282  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920459  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6920460  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6920457  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920458  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6920455  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6920456  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6921291  skx-normal hpcg.job    xdtas PD       0:00     64 (Priority)
           6921290  skx-normal hpcg.job    xdtas PD       0:00     32 (Priority)
           6921289  skx-normal hpcg.job    xdtas PD       0:00     16 (Priority)
           6922082  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922087  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922362  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922536  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922695  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922893  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922959  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922970  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6922980  skx-normal hpcc.job    xdtas PD       0:00     16 (Priority)
           6923091  skx-normal hpcg.job    xdtas PD       0:00      2 (Priority)
           6923092  skx-normal  imb.job    xdtas PD       0:00      2 (Priority)
           6923093  skx-normal  ior.job    xdtas PD       0:00      2 (Priority)
ExeCUTEd_SucCeSsFully
PROMPTtTtT To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

appstdout                                       0%    0     0.0KB/s   --:-- ETAappstdout                                     100%   21KB 120.2KB/s   00:00    
gen.info                                        0%    0     0.0KB/s   --:-- ETAgen.info                                      100% 5627    85.1KB/s   00:00    
hpcc.job                                        0%    0     0.0KB/s   --:-- ETAhpcc.job                                      100% 2550    49.9KB/s   00:00    
job.id                                          0%    0     0.0KB/s   --:-- ETAjob.id                                        100%    8     0.1KB/s   00:00    
stderr                                          0%    0     0.0KB/s   --:-- ETAstderr                                        100%  269     4.3KB/s   00:00    
stdout                                          0%    0     0.0KB/s   --:-- ETAstdout                                        100%   21     0.4KB/s   00:00    
To access the system:

1) If not using ssh-keys, please enter your TACC password at the password prompt
2) At the TACC Token prompt, enter your 6-digit code followed by <return>.  

StArTEd_ExeCUTEtIoM_SucCeSsFully
ExeCUTEd_SucCeSsFully
